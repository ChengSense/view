var view=function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function c(e,t){if(e)if(e.hasOwnProperty("$index"))for(var n=e.$index;n<e.length;n++)t(e[n],n);else Array.isArray(e)?e.forEach(function(e,n){return t(e,n)}):Object.keys(e).forEach(function(n){return t(e[n],n)})}function i(e,t){e.every(function(e,n){return!t(e,n)})}function a(e){return[].slice.call(e)}function s(e){return null==e||void 0==e||""==e}Object.assign(Array.prototype,{remove:function(e){var t=this.indexOf(e);return t>-1&&this.splice(t,1),this},replace:function(e,t){var n=this.indexOf(e);n>-1&&this.splice(n,1,t)},splices:function(e){this.splice.apply(this,e)},has:function(e){return this.indexOf(e)>-1},ones:function(e){this.has(e)||this.push(e)}});var l=/<\s*([^\s"'<>=]+)(?:[^"'>]|"[^"]*"|'[^']*')*>|(@each|@when|\.when)\s*\((.*)\)\s*\{|\.when\s*\{|\{([^\{\}]*)\}|\}/g,h=/(@each|@when|\.when)\s*\((.*)\)\s*\{|\.when\s*\{/,u=/(@each)\s*\((.*)\)\s*\{/g,f=/(@each)\s*=\s*("([^"]*)"|'([^']*)')/,d=/@(id)\s*=\s*("([^"]*)"|'([^']*)')/,p=/@(\w*)\s*=\s*("([^"]*)"|'([^']*)')/,v=/(@when|\.when)\s*\((.*)\)\s*\{|\.when\s*\{/g,w=/\.when\s*\((.*)\)\s*\{|\.when\s*\{/g,m=/@when/g,y=/\s*([^\s"'<>\/=]+)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/g,g=/\{([^\{\}]*)\}/g,N=/^\}$|<\s*\/\w+>/,E=/("[^"]*"|'[^']*')|(\.?([_\$_a-zA-Z]+\w?)(\.([_\$a-zA-Z]+\w?))*)/g,$=/<\s*([^\s"'<>=]+)(?:[^"'>]|"[^"]*"|'[^']*')*>/;function b(e,t){try{return H.$path=void 0,H.$cache=new Map,C(e=e.replace(g,"$1"),t)}catch(e){return void console.warn(e)}}function R(e,t,n){try{return H.$path=void 0,H.$cache=new Map,x(e="'".concat(e.replace(g,"'+($1)+'"),"'"),t,n)}catch(e){return void console.warn(e)}}function x(e,t,n){try{var o=Reflect.getPrototypeOf(n.filter);return Reflect.setPrototypeOf(o,t),C(e,n.filter)}catch(e){return void console.warn(e)}}var O=new Map;function C(e,t){var n=O.get(e);return void 0==n&&O.set(e,n=e.replace(E,function(e){return e.match(/^["'\.]/)?e:"scope.".concat(e)})),new Function("scope","return ".concat(n,";"))(t)}function P(e,t,n,o,r){function a(e,t,n,o){var i;!function(e,t){c(e.attributes,function(e){if(e){var n=function(e,t,n){return{node:e,clas:n,scope:t,children:[],childNodes:[]}}(e,t,e.cloneNode());":model"==n.clas.name?h(e,t):new RegExp(g).test(e.nodeValue)&&("value"==n.clas.name&&h(e,t),e.nodeValue=R(e.nodeValue,t,r),l.express(e,t,n))}})}(e,t),function(e,t,n){n&&n.action&&n.action.forEach(function(n,o){var c=n.toString().match(/\(([^)]*)\)/);if(c){var i=b(n.toString().replace(c[0],""),r.action);e.on(o,i,t,c[1])}else{var a=b(n,r.action);e.on(o,a,t)}})}(e,t,o),(i=new RegExp(g).exec(e.nodeValue))&&(e.nodeValue=function(e,t,n){try{return H.$path=void 0,H.$cache=new Map,x(e=e.replace(g,"$1"),t,n)}catch(e){return void console.warn(e)}}(i[1],t,r),l.express(e,t,n))}var l={each:function(e,t,n,o){void 0!=H.$cache&&(n.resolver="each",n.content=o,n.scope=t,n.node=e,V(n,r,H.$cache))},when:function(e,t,n){void 0!=H.$cache&&(n.resolver="when",n.scope=t,n.node=e,V(n,r,H.$cache))},express:function(e,t,n){void 0!=H.$cache&&(n.resolver="express",n.scope=t,n.node=e,V(n,r,H.$cache))}};function h(e,t){var n=e.ownerElement;n._express=e.nodeValue.replace(g,"$1");var o="scope.".concat(n._express);(f[n.type]||f[n.localName]||f.other)(e,t,o)}var f={checkbox:function(e,t,n){try{var o=e.ownerElement;o.on("change",function(){var e=o.value.replace(/(\'|\")/g,"\\$1"),n=b(o._express,t);o.checked?n.ones(e):n.remove(e)},t);var r=b(o._express,t);Array.isArray(r)&&r.has(o.value)&&(o.checked=!0)}catch(e){console.error(e)}},radio:function(e,t,n){try{var o=e.ownerElement;o.on("change",function(){var e=o.value.replace(/(\'|\")/g,"\\$1"),r="".concat(n,"='").concat(e,"';");new Function("scope",r)(t)},t),b(o._express,t)==o.value&&(o.checked=!0),o.name=H.$path}catch(e){console.error(e)}},select:function(e,t,n){try{var o,r=e.ownerElement;r.on("change",o=function(){var e=r.value.replace(/(\'|\")/g,"\\$1"),o="".concat(n,"='").concat(e,"';");new Function("scope",o)(t)},t);var c=b(r._express,t);s(c)?o():r.value=c}catch(e){console.error(e)}},other:function(e,t,n){try{var o=e.ownerElement;o.on("change",function(){var e=o.value.replace(/(\'|\")/g,"\\$1"),r="".concat(n,"='").concat(e,"';");new Function("scope",r)(t)},t)}catch(e){console.error(e)}}};function d(e,t){return{id:t.id,node:e,clas:t.clas,scope:t.scope,children:t.children,childNodes:[]}}!function e(t,n,o,s){i(o,function(o){if(1==o.clas.nodeType)if(/(CODE|SCRIPT)/.test(o.clas.nodeName)){var h=o.clas.cloneNode(!0);t.appendChild(h);var f=d(h,o);s.childNodes.push(f)}else h=o.clas.cloneNode(),t.appendChild(h),f=d(h,o),s.childNodes.push(f),function(e,t,n,o){Reflect.has(r.component,e.localName)&&(function(e,t,n,o){var r=document.createComment("component");e.parentNode.replaceChild(r,e),n.scope=t,n.resolver="component",n.content=o,n.childNodes.push({node:r,content:n,children:[],childNodes:[]})}(e,t,n,o),M.component(n,r))}(h,n,f,s),e(h,n,o.children,f),a(h,n,f,o);else if(new RegExp(u).test(o.clas.nodeValue)){var p=o.clas.nodeValue.replace(u,"$2").split(":"),w=p.shift().trim(),y=p.pop().trim(),g=p.shift(),N=b(y,n),E=function(e,t,n){var o=document.createComment("each:".concat(H.$path));return t.appendChild(o),{node:e,clas:n.clas,scope:n.scope,children:n.children,childNodes:[{node:o,clas:n.clas,scope:n.scope,children:[],childNodes:[]}]}}(null,t,o);s.childNodes.push(E),l.each(null,n,E,s),c(N,function(r,c){var i=Object.create(n.$target);g&&(i[g.trim()]=c),i=new Proxy(i,function(e,t,n,o){return{get:function(r,c){return t==c?Reflect.get(n,o):"$target"==c?r:r.hasOwnProperty(c)?Reflect.get(r,c):Reflect.get(e,c)},set:function(r,c,i){return t==c?Reflect.set(n,o,i):r.hasOwnProperty(c)?Reflect.set(r,c,i):Reflect.set(e,c,i)}}}(n,w,N,c)),e(t,i,o.children,E)})}else new RegExp(m).test(o.clas.nodeValue)?(E=function(e,t,n,o){var r=document.createComment("when:".concat(H.$path));return t.appendChild(r),{node:e,clas:n.clas,scope:n.scope,content:o,children:n.children,childNodes:[{node:r,clas:n.clas,scope:n.scope,children:[],childNodes:[]}]}}(null,t,o,s),s.childNodes.push(E),i(o.children,function(o){var r=b(o.clas.nodeValue.replace(v,"$2"),n);if(l.when(null,n,E,s),r||void 0==r)return e(t,n,o.children,E),!0})):(h=o.clas.cloneNode(),t.appendChild(h),f=d(h,o),s.childNodes.push(f),a(h,n,f))})}(e,t,n,o)}function A(e,t,n){var o=document.createComment("component");return e.before(o),n.content.node=n.view,{id:t.id,clas:t.clas,scope:t.scope,resolver:t.resolver,content:t.content,children:[n.node],childNodes:[{node:o,scope:t.scope,children:[],childNodes:[]},n.content]}}var M={view:function(e,t,n,o,r){try{var c=document.createDocumentFragment();new P(c,n,a(t.children),o,r),o.children=t.children,o.clas=t.clas,e.reappend(c)}catch(e){console.error(e)}},component:function(e,t){try{var n=new t.component[e.clas.localName];if(s(n))return;Reflect.setPrototypeOf(n.model,e.scope);var o=k(e.childNodes),r=e.content.childNodes;S(e.childNodes);var c=new z({view:n.view,model:n.model,action:n.action}),i=A(o,e,c);if(r.replace(e,i),o.parentNode&&o.parentNode.replaceChild(c.view,o),!e.id)return;var a=R(e.id,e.scope,t);Reflect.set(i,"@".concat(a),c)}catch(e){console.error(e)}},compo:function(e,t,n){try{Reflect.setPrototypeOf(e.model,t.scope);var o=k(t.childNodes),r=t.content.childNodes;S(t.childNodes);var c=new z({view:e.view,model:e.model,action:e.action}),i=A(o,t,c);if(r.replace(t,i),o.parentNode&&o.parentNode.replaceChild(c.view,o),!t.id)return;var a=R(t.id,t.scope,n);Reflect.set(i,"@".concat(a),c)}catch(e){console.error(e)}},when:function(e,t){try{var n=k(e.childNodes),o=document.createDocumentFragment(),r=e.content.childNodes;S(e.childNodes),new P(o,e.scope,[e],e.content,t),r.replace(e,r.pop()),n.parentNode&&n.parentNode.replaceChild(o,n)}catch(e){console.error(e)}},each:function(e,t){try{var n=k(e.childNodes),o=document.createDocumentFragment(),r=e.content.childNodes;S(e.childNodes),new P(o,e.scope,[e],e.content,t),r.replace(e,r.pop()),n.parentNode&&n.parentNode.replaceChild(o,n)}catch(e){console.error(e)}},arrayEach:function(e,t,n,o){try{var r=function e(t,n){try{return i(t,function(t){if(t.node&&t.node.parentNode)return n=t.node;if(t.childNodes.length){var o=t.childNodes[t.childNodes.length-1];if(o.node&&o.node.parentNode)return n=o.node;n=e([o])}}),n}catch(e){console.error(e)}}([e.childNodes[n]]),c=document.createDocumentFragment(),s={clas:e.clas,children:e.children,scope:e.scope},l={childNodes:[],children:[]};new P(c,e.scope,[s],l,t),c.removeChild(c.childNodes[0]);var h=a(l.childNodes[0].childNodes);h.splice(0,1,n+1,0),e.childNodes.splices(h),o.remove(l.childNodes[0]),r.parentNode&&r.after(c)}catch(e){console.error(e)}},express:function(e,t,n){try{e.node.nodeValue=R(e.clas.nodeValue,e.scope,t),V(e,t,n),"value"==e.node.name&&(e.node.ownerElement.value=e.node.nodeValue)}catch(e){console.error(e)}},attribute:function(e,t,n){try{var o=document.createAttribute(R(e.clas.name,scope));V(e,t,n),o.nodeValue=e.clas.nodeValue,e.node.ownerElement.setAttributeNode(o),e.node.ownerElement.removeAttributeNode(e.node)}catch(e){console.error(e)}}},j=function(e,t,n){e.forEach(function(o,r){o.forEach(function(c){try{_[c.resolver]?_[c.resolver](c,r,o,t,n):M[c.resolver](c,r,e)}catch(e){console.error(e)}})})},_={each:function(e,t,n,o,r){try{if(r>0)M.arrayEach(e,t,o,n);else S(e.childNodes.splice(o+1))}catch(e){console.error(e)}}};function V(e,t,n){n.forEach(function(n){var o=n.get(t);o?o.ones(e):n.set(t,[e])})}function k(e,t){try{return i(e,function(e){if(e.node&&e.node.parentNode)return t=e.node,e.node=null,t;t=k(e.childNodes)}),t}catch(e){console.error(e)}}function S(e){e.forEach(function(e){if(e.node&&e.node.parentNode)return e.node.parentNode.removeChild(e.node);e.childNodes&&S(e.childNodes)})}function L(e){try{return document.querySelectorAll(e)}catch(n){var t=document.createElement("div");return t.innerHTML=e.trim(),t.childNodes}}function F(e){if(new RegExp($).test(e)){var t=e.match(y),n=document.createElement(t.shift());return t.forEach(function(e){try{var t=e.replace(y,"$1"),o=e.replace(y,"$3");n.setAttribute(t,o)}catch(e){}}),n}return document.createRange().createContextualFragment(e).firstChild}function q(e,t,n){this.addEventListener?this.addEventListener(e,function(e){t.forEach(function(t,o){t.forEach(function(t){var r=t?b("[".concat(t,"]"),n):[];r.push(e);var c=Reflect.getPrototypeOf(o),i=Object.assign({},c);Reflect.setPrototypeOf(i,n||o.$model),o.apply(i,r)})})},!1):this.attachEvent?this.attachEvent("on".concat(e),function(e){t.forEach(function(t,o){t.forEach(function(t){var r=t?b("[".concat(t,"]"),n):[];r.push(e);var c=Reflect.getPrototypeOf(o),i=Object.assign({},c);Reflect.setPrototypeOf(i,n||o.$model),o.apply(i,r)})})}):element["on".concat(e)]=function(e){t.forEach(function(t,o){t.forEach(function(t){var r=t?b("[".concat(t,"]"),n):[];r.push(e);var c=Reflect.getPrototypeOf(o),i=Object.assign({},c);Reflect.setPrototypeOf(i,n||o.$model),o.apply(i,r)})})}}function T(e,n,o){if("object"!=t(e))return e;return e=new Proxy(e,function n(o){var r=new Map,c=new Map;return{get:function(i,a,s){if("$target"==a)return i;if(!i.hasOwnProperty(a)&&Reflect.has(i,a))return Reflect.get(i,a);var l=o?"".concat(o,".").concat(a):a;H.$cache.delete(o),H.$cache.set(l,c.get(a)),D.publish(e,"get",[l]);var h=r.get(a);return void 0!=h?h:(function(e){if(e instanceof Component)return;if(e instanceof Date)return;if("object"==t(e))return e}(h=Reflect.get(i,a))&&(h=new Proxy(h,n(l))),r.set(a,h),c.set(a,new Map),H.$cache.delete(o),H.$cache.set(l,c.get(a)),function(e,t){if(!Array.isArray(e))return;var n={shift:function(){var e=Array.prototype.shift,n=e.apply(this,arguments),o=this.length;return j(t,o),n},pop:function(){var e=Array.prototype.pop,n=e.apply(this,arguments),o=this.length;return j(t,o),n},splice:function(){var e=Array.prototype.splice;if(this.length){var n=this.length,o=e.apply(this,arguments);return arguments.length>2?this.$index=n:n=this.length,j(t,n,arguments.length-2),Reflect.deleteProperty(this,"$index"),o}},unshift:function(){var e=Array.prototype.unshift;if(arguments.length){var n=this.$index=this.length,o=e.apply(this,arguments);return j(t,n,arguments.length),Reflect.deleteProperty(this,"$index"),o}},push:function(){var e=Array.prototype.push;if(arguments.length){var n=this.$index=this.length,o=e.apply(this,arguments);return j(t,n,arguments.length),Reflect.deleteProperty(this,"$index"),o}},reverse:function(){var e=Array.prototype.reverse,t=e.apply(this,arguments);return t},sort:function(){var e=Array.prototype.sort,t=e.apply(this,arguments);return t}};Reflect.setPrototypeOf(n,Array.prototype),Reflect.setPrototypeOf(e,n)}(h,c.get(a)),h)},set:function(n,i,a,s){if(!n.hasOwnProperty(i)&&Reflect.has(n,i))return Reflect.set(n,i,a);var l=r.get(i),h=c.get(i);r.delete(i),c.delete(i),Reflect.set(n,i,a.$target||a);var u=s[i];!function n(o,r){if(o instanceof Component)return;"object"==t(o)&&"object"==t(r)&&Object.keys(r).forEach(function(c){H.$cache=new Map;var i=o[c],a=H.$cache;H.$cache=new Map;var s=r[c],l=H.$cache;"object"!=t(i)&&"object"!=t(s)&&D.publish(e,"set",[l,a]),n(i,s)})}(u,l);var f=o?"".concat(o,".").concat(i):i;return D.publish(e,"set",[new Map([[f,h]]),new Map([[f,c.get(i)]])]),D.publish(e,f,[u,l]),!0}}}()),Object.keys(n).forEach(function(t){return D.subscribe(e,t,n[t])}),Object.keys(o||{}).forEach(function(t){return D.subscribe(e,t,o[t])}),e}Object.assign(Node.prototype,{on:function(e,t,n,o){if(this._manager)if(this._manager.get(e)){var r=this._manager.get(e);r.get(t)?r.get(t).ones(o):r.set(t,[o])}else{var c=new Map;c.set(t,[o]),this._manager.set(e,c),q.call(this,e,c,n)}else{var i=new Map;i.set(t,[o]),this._manager=new Map,this._manager.set(e,i),q.call(this,e,i,n)}return this},off:function(e,t){if(this._manager){var n=this._manager.get(e);if(void 0==n)return;if(n.delete(t),n.size)return;this._manager.delete(e),function(e,t){this.addEventListener?this.removeEventListener(e,t,!1):this.detachEvent?this.detachEvent("on".concat(e),t):element["on".concat(e)]=null}.call(this,e,t)}return this},reappend:function(e){return i(a(this.childNodes),function(e){e.parentNode.removeChild(e)}),this.appendChild(e),this},before:function(e){this.parentNode.insertBefore(e,this)},after:function(e){this.nextSibling?this.parentNode.insertBefore(e,this.nextSibling):this.parentNode.appendChild(e)}}),Object.assign(NodeList.prototype,{on:function(e,t){return i(this,function(n){n.on(e,t)}),this},off:function(e,t){return i(this,function(n){n.off(e,t)}),this}});var D=new(function(){function e(){n(this,e),this.map=new Map}return r(e,[{key:"publish",value:function(e,t,n){var o=this.map.get(e);if(o){var r=o.get(t);r?r.data.push(n):o.set(t,{data:[n],queue:[]})}else{var c=new Map;c.set(t,{data:[c],queue:[]}),this.map.set(e,c)}this.notify(o.get(t),e)}},{key:"notify",value:function(e,t){if(e)for(var n=function(){var n=e.data.shift();e.queue.forEach(function(e){e.apply(t,n)})};e.data.length;)n();else this.map.forEach(function(e){e.forEach(function(e){for(var n=function(){var n=e.data.shift();e.queue.forEach(function(e){e.apply(t,n)})};e.data.length;)n()})})}},{key:"subscribe",value:function(e,t,n){var o=this.map.get(e);if(o){var r=o.get(t);r?r.queue.push(n):o.set(t,{data:[],queue:[n]})}else{var c=new Map;c.set(t,{data:[],queue:[n]}),this.map.set(e,c)}}}]),e}());var H={$path:void 0},z=function(){function e(t){n(this,e),this.model=T(t.model,B),this.action=t.action,this.watch=t.watch,this.filter=t.filter,this.component={},this.componenter(t.component),this.creater(t)}return r(e,[{key:"creater",value:function(e){var t,n;this.content={childNodes:[],children:[]},this.view=L(e.view)[0],this.ref=(t=this.content,n=this,new Proxy({},{get:function(e,n){var o=t.childNodes,r=I(o,n,[]),c=r.shift();return c.childNodes[1]},set:function(e,o,r){var c=t.childNodes,i=I(c,o,[]),a=i.shift();return M.compo(new r,a,n),!0}}));var o,r,c=function e(t,n){return function(e,t){for(;e.length&&!t(e.shift()););}(t,function(o){if(""!=o.trim()){if(new RegExp(N).test(o))return!0;var r={clas:F(o),children:[],action:new Map};if(n.push(r),new RegExp($).test(o))new RegExp(N).test(r.clas.outerHTML)&&e(t,r.children),o=(o=(o=o.replace(f,function(e){e=e.replace(f,"@each($3){");var t=n.indexOf(r),o={clas:F(e),children:[r]};return n.splice(t,1,o),""})).replace(d,function(e){var t=e.replace(d,"$1"),n=e.replace(d,"$3");return Reflect.set(r,t,n),""})).replace(p,function(e){var t=e.replace(p,"$1"),n=e.replace(p,"$3");return r.action.set(t,n),""});else if(new RegExp(h).test(o))if(e(t,r.children),new RegExp(m).test(o)){var c=n.indexOf(r),i={clas:F("@when{"),children:[r]};n.splice(c,1,i)}else new RegExp(w).test(o)&&n[n.length-2].children.push(n.pop())}}),n}((o=this.view,r=o.outerHTML,(r=r.replace(l,function(e){return"######".concat(e.trim(),"######")})).split("######")),[])[0];!function(e){var t={$view:e.view,$model:e.model,$action:e.action,$watch:e.watch,$ref:e.ref};e.action=e.action||{},Reflect.setPrototypeOf(t,Function.prototype),Object.values(e.action).forEach(function(e){return Reflect.setPrototypeOf(e,t)});var n=Object.assign({},t);e.filter=e.filter||{},Reflect.setPrototypeOf(e.filter,n)}(this),M.view(this.view,c,this.model,this.content,this)}},{key:"componenter",value:function(e){var t=this;Object.values(e||{}).forEach(function(e){var n=e.name.toLowerCase();Reflect.set(t.component,n,e)})}}]),e}(),B={set:function(e,t){!function(e,t){e&&t?e.forEach(function(e){e&&e.forEach(function(e,n){a(e).forEach(function(o){!function e(t,n){try{return t.every(function(t){if(t.node){var o=t.node.ownerElement||t.node;return n=document.body.contains(o),!1}n=e(t.childNodes)}),n}catch(e){console.error(e)}}([o])?e.remove(o):M[o.resolver](o,n,t)})})}):e&&!t&&e.forEach(function(e){e&&e.forEach(function(e){S(e)})})}(e,t)},get:function(e){H.$path=e}};function I(e,t,n){return e.every(function(e){return e["@".concat(t)]?(n.push(e),!1):(e.childNodes&&I(e.childNodes,t,n),!n.length)}),n}var Z=function(){function e(t){n(this,e),this.model=t.model,this.action=t.action,this.watch=t.watch,this.filter=t.filter,this.creater(t)}return r(e,[{key:"creater",value:function(e){this.content={childNodes:[],children:[]};var t=L(e.view)[0];t.parentNode.removeChild(t),this.view=t.outerHTML}}]),e}();return window.View=z,window.Component=Z,window.Router=function(e,t){var n,o,r,c=/^:/,i=/^\/(.+)/;this.redreact=u;var a,s=!((a=window.navigator.userAgent).indexOf("compatible")>-1&&a.indexOf("MSIE")>-1||a.indexOf("Trident")>-1||a.indexOf("Edge")>-1)&&window.history&&"pushState"in window.history;function l(e){for(r=Object.keys(t);r.length;){n=r.shift(),o={};var c=n.replace(i,"$1");if(h(c=c.split("/"),e.split("/")))return{component:t[n].component,router:t[n].router,action:t[n].action,after:t[n].after,params:o,path:e}}}function h(e,t){for(;t.length;){var n=e.shift(),r=t.shift();if(r!=n){if(!c.test(n))return!1;n=n.replace(c,""),o[n]=r}}return!0}function u(e){var t=window.location.pathname;window.location.href=t+"#"+e}function f(t){var n=l(window.location.hash.replace(/^#\/?/,""));n?(n.action(n.params),e.ref[n.router]=n.component,n.after&&n.after()):void 0!=t&&"load"!=t.type||u("")}window.addEventListener("load",f,f()),window.addEventListener(s?"popstate":"hashchange",f,!1)},window.query=L,e.Component=Z,e.View=z,e.global=H,e}({});
